<!DOCTYPE html>
<html lang="<%= lang %>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= lang === 'hu' ? 'Kvíz' : lang === 'ro' ? 'Quiz' : 'Quiz' %></title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <header>
        <div class="navbar">
            <h1><%= lang === 'hu' ? 'Kvíz' : lang === 'ro' ? 'Quiz' : 'Quiz' %></h1>
            <ul>
                <li><a href="/?lang=<%= lang %>"><%= lang === 'hu' ? 'Főoldal' : lang === 'ro' ? 'Acasă' : 'Home' %></a></li>
                <li><a href="/battles?lang=<%= lang %>"><%= lang === 'hu' ? 'Csaták' : lang === 'ro' ? 'Bătălii' : 'Battles' %></a></li>
                <li><a href="/weapons?lang=<%= lang %>"><%= lang === 'hu' ? 'Fegyverek' : lang === 'ro' ? 'Arme' : 'Weapons' %></a></li>
            </ul>
            <div class="lang-switch">
                <a href="?lang=en">EN</a>
                <a href="?lang=hu">HU</a>
                <a href="?lang=ro">RO</a>
            </div>
        </div>
    </header>
    <main>
        <form id="quizForm">
            <% quiz.questions.forEach((q, index) => { %>
                <div class="question">
                    <h3><%= q.question[lang] %></h3>
                    <% q.options.forEach((opt, optIndex) => { %>
                        <label>
                            <input type="radio" name="q<%= index %>" value="<%= optIndex %>">
                            <%= opt[lang] %>
                        </label><br>
                    <% }); %>
                </div>
            <% }); %>
            <button type="button" onclick="submitQuiz()"><%= lang === 'hu' ? 'Beküldés' : lang === 'ro' ? 'Trimite' : 'Submit' %></button>
        </form>
        <div id="result" style="display: none;">
            <h2><%= lang === 'hu' ? 'Eredmény' : lang === 'ro' ? 'Rezultat' : 'Result' %>: <span id="score"></span></h2>
        </div>
    </main>
    <footer>
        <p>&copy; 2026 WWII Website</p>
    </footer>
    <script type="application/json" id="quiz-data">
<%= JSON.stringify(quiz.questions.map(q => q.answer)) %>
    </script>
    <script>
        const answers = JSON.parse(document.getElementById('quiz-data').textContent);
        function submitQuiz() {
            const form = document.getElementById('quizForm');
            const resultDiv = document.getElementById('result');
            const scoreSpan = document.getElementById('score');
            let score = 0;

            answers.forEach((answer, index) => {
                const selected = form.elements['q' + index];
                if (selected.value == answer) {
                    score++;
                }
            });

            scoreSpan.textContent = score + '/' + answers.length;
            resultDiv.style.display = 'block';
        }
    </script>
</body>
</html>