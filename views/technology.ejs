<!DOCTYPE html>
<html lang="<%= lang %>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= technology.technology.name[lang] %></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/style.css">
    <style>
        main {
            background: linear-gradient(135deg, #1f3a93, #d41159);
            color: white;
            box-shadow: #2a2a4a 0px 10px 30px -5px, rgba(255, 192, 0, 0.2) 0px 20px 60px -10px;
            border-radius: 0% 0% 50px 50px;
        }

        .tech-hero {
            background: linear-gradient(135deg, #d41159 0%, #1f3a93 100%);
            padding: 4rem 0;
            color: white;
            position: relative;
            overflow: hidden;
            
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.3), inset 0 0 30px rgba(12, 15, 13, 0.2);
        }

        .tech-hero::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background: radial-gradient(circle at 30% 50%, rgba(255, 192, 0, 0.1) 0%, transparent 50%);
            animation: pulse 3s ease-in-out infinite;
        }

        .tech-hero-content {
            position: relative;
            z-index: 2;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .timeline {
            position: relative;
            padding: 2rem 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, var(--accent-color), transparent);
        }

        .timeline-item {
            margin-bottom: 3rem;
            position: relative;
        }

        .timeline-item:nth-child(odd) .timeline-content {
            margin-left: 0;
            margin-right: auto;
            padding-right: 3rem;
            text-align: right;
            width: 48%;
        }

        .timeline-item:nth-child(even) .timeline-content {
            margin-left: auto;
            margin-right: 0;
            padding-left: 3rem;
            text-align: left;
            width: 48%;
        }

        .timeline-dot {
            position: absolute;
            left: 50%;
            top: 0;
            transform: translateX(-50%);
            width: 24px;
            height: 24px;
            background: var(--accent-color);
            border: 4px solid white;
            border-radius: 50%;
            z-index: 3;
            box-shadow: 0 0 0 6px var(--primary-color);
        }

        .timeline-content {
            background: linear-gradient(135deg, var(--dark-bg), #2a2a4a);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--accent-color);
            transition: all 0.3s ease;
        }

        .timeline-content:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 192, 0, 0.2);
        }

        .timeline-year {
            color: var(--accent-color);
            font-weight: 900;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .timeline-event {
            color: white;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .timeline-details {
            color: var(--light-text);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .spec-card {
            background: linear-gradient(135deg, var(--dark-bg), #2a2a4a);
            padding: 2rem;
            border-radius: var(--border-radius);
            border: 2px solid var(--primary-color);
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }

        .spec-card:hover {
            border-color: var(--accent-color);
            box-shadow: 0 10px 30px rgba(255, 192, 0, 0.15);
        }

        .spec-card h4 {
            color: var(--accent-color);
            font-weight: 900;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }

        .spec-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255, 192, 0, 0.1);
        }

        .spec-item:last-child {
            border-bottom: none;
        }

        .spec-label {
            color: var(--accent-color);
            font-weight: 600;
        }

        .spec-value {
            color: var(--light-text);
            text-align: right;
        }

        .effect-card {
            background: linear-gradient(135deg, var(--dark-bg), #2a2a4a);
            padding: 2rem;
            border-radius: var(--border-radius);
            border-left: 8px solid white;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .effect-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, var(--secondary-color), var(--accent-color));
        }

        .effect-card:hover {
            transform: translateX(10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        .effect-title {
            color: white;
            font-weight: 700;
            font-size: 1.3rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .effect-icon {
            width: 40px;
            height: 40px;
            background: var(--accent-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: black;
            font-weight: 900;
        }

        .effect-description {
            color: var(--light-text);
            margin-bottom: 0.75rem;
            line-height: 1.6;
        }

        .effect-range {
            color: var(--accent-color);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .impact-visualization {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 2rem auto;
            background: radial-gradient(circle, rgba(255, 192, 0, 0.1), transparent 70%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: radiationPulse 2s ease-in-out infinite;
        }

        @keyframes radiationPulse {
            0%, 100% {
                box-shadow: inset 0 0 30px rgba(255, 192, 0, 0.2);
            }
            50% {
                box-shadow: inset 0 0 50px rgba(255, 192, 0, 0.4);
            }
        }

        .impact-center {
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, var(--secondary-color), var(--accent-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 0 0 30px rgba(255, 192, 0, 0.5);
        }

        .impact-ring {
            position: absolute;
            border: 2px dashed var(--accent-color);
            border-radius: 50%;
            opacity: 0.5;
            animation: expandRing 3s ease-out infinite;
        }

        .ring-1 {
            width: 150px;
            height: 150px;
            animation-delay: 0s;
        }

        .ring-2 {
            width: 220px;
            height: 220px;
            animation-delay: 0.5s;
        }

        .ring-3 {
            width: 290px;
            height: 290px;
            animation-delay: 1s;
        }

        @keyframes expandRing {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(1.3);
            }
        }

        .fact-card {
            background: linear-gradient(135deg, #d41159, #1f3a93);
            padding: 2rem;
            border-radius: var(--border-radius);
            color: white;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .fact-card:hover {
            border-color: var(--accent-color);
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(255, 192, 0, 0.2);
        }

        .fact-card h5 {
            color: var(--accent-color);
            font-weight: 900;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .fact-card p {
            color: rgba(255, 255, 255, 0.95);
            line-height: 1.8;
            margin-bottom: 0;
        }

        .nav-tabs .nav-link {
            color: var(--light-text);
            border: none;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            transition: all 0.3s ease;
            
        }

        .nav-tabs .nav-link:hover {
            color: var(--accent-color);
            border-color: var(--accent-color);
        }

        .nav-tabs .nav-link.active {
            background-color: transparent;
            color: var(--accent-color);
            border-color: var(--accent-color);
        }

        .tab-content {
            margin-top: 2rem;
        }

        @media (max-width: 992px) {
            .timeline::before {
                left: 20px;
            }

            .timeline-item:nth-child(odd) .timeline-content,
            .timeline-item:nth-child(even) .timeline-content {
                width: 100%;
                padding-left: 80px;
                padding-right: 0;
                text-align: left;
            }

            .timeline-dot {
                left: 20px;
            }
        }
    </style>
</head>
<body>
    <%- include('partials/navbar') %>

    <main>
        <!-- Hero Section -->
        <section class="tech-hero">
            <div class="tech-hero-content">
                <div class="container">
                    <h1 class="display-3 fw-bold mb-3">
                        <i class="fas fa-radiation"></i> <%= technology.technology.name[lang] %>
                    </h1>
                    <p class="lead mb-4">
                        <%= technology.technology.subtitle[lang] %>
                    </p>
                    <p class="text-white-50">
                        <%= technology.technology.description[lang] %>
                    </p>
                </div>
            </div>
        </section>

        <div class="container py-5">
            <!-- Navigation Tabs -->
            <ul class="nav nav-tabs mb-5 gap-2" id="techTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="timeline-tab" data-bs-toggle="tab" data-bs-target="#timeline" type="button">
                        <i class="fas fa-history"></i> <%= lang === 'hu' ? 'Történet' : lang === 'ro' ? 'Istorie' : 'Timeline' %>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="specs-tab" data-bs-toggle="tab" data-bs-target="#specs" type="button">
                        <i class="fas fa-cog"></i> <%= lang === 'hu' ? 'Specifikációk' : lang === 'ro' ? 'Specificații' : 'Specifications' %>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="effects-tab" data-bs-toggle="tab" data-bs-target="#effects" type="button">
                        <i class="fas fa-fire"></i> <%= lang === 'hu' ? 'Hatások' : lang === 'ro' ? 'Efecte' : 'Effects' %>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="facts-tab" data-bs-toggle="tab" data-bs-target="#facts" type="button">
                        <i class="fas fa-lightbulb"></i> <%= lang === 'hu' ? 'Érdekességek' : lang === 'ro' ? 'Fapte' : 'Facts' %>
                    </button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="techTabContent">
                <!-- Timeline Tab -->
                <div class="tab-pane fade show active" id="timeline" role="tabpanel">
                    <h2 class="page-title mb-4">
                        <i class="fas fa-hourglass-half"></i> <%= lang === 'hu' ? 'Az Atombomba Története' : lang === 'ro' ? 'Istoria Bombei Atomice' : 'The Atomic Bomb History' %>
                    </h2>
                    <div class="timeline">
                        <% technology.technology.timeline.forEach((item, index) => { %>
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <div class="timeline-content">
                                    <div class="timeline-year">
                                        <%= typeof item.year === 'string' ? item.year : item.year %>
                                    </div>
                                    <div class="timeline-event">
                                        <%= item.event[lang] %>
                                    </div>
                                    <div class="timeline-details">
                                        <%= item.details[lang] %>
                                    </div>
                                </div>
                            </div>
                        <% }); %>
                    </div>
                </div>

                <!-- Specifications Tab -->
                <div class="tab-pane fade" id="specs" role="tabpanel">
                    <h2 class="page-title mb-4">
                        <i class="fas fa-tools"></i> <%= lang === 'hu' ? 'Technikai Specifikációk' : lang === 'ro' ? 'Specificații Tehnice' : 'Technical Specifications' %>
                    </h2>

                    <!-- Little Boy -->
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="spec-card">
                                <h4>
                                    <i class="fas fa-circle" style="color: #ff9800;"></i>
                                    <%= technology.technology.specifications.little_boy.name[lang] %>
                                    <br>
                                    <small style="font-size: 0.7em; color: var(--light-text); font-weight: normal;">
                                        <%= lang === 'hu' ? 'Cél: ' : lang === 'ro' ? 'Țintă: ' : 'Target: ' %><%= technology.technology.specifications.little_boy.target %>
                                    </small>
                                </h4>
                                <% technology.technology.specifications.little_boy.specs.forEach(spec => { %>
                                    <div class="spec-item">
                                        <span class="spec-label"><%= spec.label[lang] %></span>
                                        <span class="spec-value"><%= typeof spec.value === 'object' ? spec.value[lang] : spec.value %></span>
                                    </div>
                                <% }); %>
                            </div>
                        </div>

                        <!-- Fat Man -->
                        <div class="col-lg-6">
                            <div class="spec-card">
                                <h4>
                                    <i class="fas fa-circle" style="color: #2196F3;"></i>
                                    <%= technology.technology.specifications.fat_man.name[lang] %>
                                    <br>
                                    <small style="font-size: 0.7em; color: var(--light-text); font-weight: normal;">
                                        <%= lang === 'hu' ? 'Cél: ' : lang === 'ro' ? 'Țintă: ' : 'Target: ' %><%= technology.technology.specifications.fat_man.target %>
                                    </small>
                                </h4>
                                <% technology.technology.specifications.fat_man.specs.forEach(spec => { %>
                                    <div class="spec-item">
                                        <span class="spec-label"><%= spec.label[lang] %></span>
                                        <span class="spec-value"><%= typeof spec.value === 'object' ? spec.value[lang] : spec.value %></span>
                                    </div>
                                <% }); %>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Effects Tab -->
                <div class="tab-pane fade" id="effects" role="tabpanel">
                    <h2 class="page-title mb-4">
                        <i class="fas fa-explosion"></i> <%= lang === 'hu' ? 'Robbanás Hatásai' : lang === 'ro' ? 'Efectele Exploziei' : 'Effects of the Explosion' %>
                    </h2>

                    <!-- NUKEMAP Visualization -->
                    <div class="mb-5">
                        <h4 style="color: var(--accent-color); margin-bottom: 1.5rem; text-align: center;">
                            <i class="fas fa-circle-radiation"></i> <%= lang === 'hu' ? 'Interaktív Nukleáris Térkép - Mai Nagyvárad Felett' : lang === 'ro' ? 'Hartă Nucleară Interactivă - Peste Oradea de Azi' : 'Interactive Nuclear Map - Over Today\'s Oradea' %>
                        </h4>
                        <div style="position: relative; width: 100%; height: 600px; border-radius: var(--border-radius); overflow: hidden; border: 3px solid var(--accent-color); box-shadow: 0 10px 40px rgba(255, 192, 0, 0.2);">
                            <iframe 
                                src="https://nuclearsecrecy.com/nukemap/?&kt=20&lat=47.058715&lng=21.927919&hob_opt=2&hob_psi=5&hob_ft=1650&zm=11"
                                style="width: 100%; height: 100%; border: none;"
                                allow="geolocation"
                            ></iframe>
                        </div>
                        <p style="color: var(--light-text); margin-top: 1.5rem; font-size: 0.95rem;">
                            <i class="fas fa-info-circle"></i> 
                            <%= lang === 'hu' ? 'A térkép egy 20 kilotonnás bomba (hasonló az eredeti Nagasaki-hoz) robbanásának hatásait mutatja Nagyvárad felett. Az interaktív térképen módosítható a bomba típusa, magassága és típusa. A különböző körök a hőhatás, sugárzás és lökéshullám terjedését mutatják.' : lang === 'ro' ? 'Harta arată efectele unei explozii de 20 kilotone (similară cu Nagasaki original) deasupra Oradea. Pe harta interactivă, puteți modifica tipul, înălțimea și tipul bombei. Cercurile diferite arată răspândirea căldurii, radiației și undei de șoc.' : 'The map shows the effects of a 20-kiloton bomb explosion (similar to the original Nagasaki) over Oradea. On the interactive map, you can modify the bomb type, altitude and type. Different circles show the spread of heat, radiation and blast waves.' %>
                        </p>
                    </div>

                    <h4 style="color: var(--accent-color); margin-bottom: 1.5rem; margin-top: 3rem;">
                        <i class="fas fa-fire"></i> <%= lang === 'hu' ? 'Robbanás Típusú Hatások' : lang === 'ro' ? 'Tipuri de Efecte ale Exploziei' : 'Types of Explosion Effects' %>
                    </h4>
                    <% technology.technology.effects.forEach((effect, index) => { %>
                        <div class="effect-card">
                            <div class="effect-title">
                                <div class="effect-icon">
                                    <%= index + 1 %>
                                </div>
                                <%= effect.title[lang] %>
                            </div>
                            <p class="effect-description">
                                <%= effect.description[lang] %>
                            </p>
                            <div class="effect-range">
                                <i class="fas fa-expand"></i>
                                <%= lang === 'hu' ? 'Hatótávolság: ' : lang === 'ro' ? 'Rază: ' : 'Range: ' %><strong><%= effect.range %></strong>
                            </div>
                        </div>
                    <% }); %>
                </div>

                <!-- Facts Tab -->
                <div class="tab-pane fade" id="facts" role="tabpanel">
                    <h2 class="page-title mb-4">
                        <i class="fas fa-star"></i> <%= lang === 'hu' ? 'Figyelemreméltó Tények' : lang === 'ro' ? 'Fapte Remarcabile' : 'Remarkable Facts' %>
                    </h2>

                    <div class="row">
                        <% technology.technology.facts.forEach((fact, index) => { %>
                            <div class="col-lg-6 mb-4">
                                <div class="fact-card">
                                    <h5>
                                        <i class="fas fa-check-circle" style="margin-right: 0.5rem;"></i>
                                        <%= fact.title[lang] %>
                                    </h5>
                                    <p>
                                        <%= fact.description[lang] %>
                                    </p>
                                </div>
                            </div>
                        <% }); %>
                    </div>

                    <div class="alert alert-warning" style="background-color: rgba(255, 192, 0, 0.1); border: 2px solid var(--accent-color); color: var(--light-text); margin-top: 3rem;">
                        <i class="fas fa-triangle-exclamation"></i>
                        <strong style="color: var(--accent-color);">
                            <%= lang === 'hu' ? 'Történelmi Reflexió' : lang === 'ro' ? 'Reflexie Istorică' : 'Historical Reflection' %>
                        </strong>
                        <p style="margin-top: 1rem; margin-bottom: 0;">
                            <%= lang === 'hu' ? 'Az atombomba az emberiség egyik legmegterhelőbb találmánya. Bár a második világháborút lezárta, hatalmas erkölcsi és etikai kérdéseket vetett fel, amelyek máig relevánsak. A nukleáris legyinztetések és a fegyverzetcsökkentés máig központi jelenség az nemzetközi politikában.' : lang === 'ro' ? 'Bomba atomică este una dintre cele mai îngreunătoare invenții ale omenirii. Deși a închis cel de-al Doilea Război Mondial, a ridicat întrebări morale și etice masive, iar astazi sunt în continuare relevante. Descurajarea nucleară și dezarmarea sunt fenomene centrale în politica internațională.' : 'The atomic bomb is one of humanity\'s most burdening inventions. While it closed WWII, it raised immense moral and ethical questions that remain relevant today. Nuclear deterrence and disarmament remain central phenomena in international politics.' %>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-dark text-white text-center py-4 mt-5">
        <div class="container">
            <p class="mb-0">&copy; 2026 WWII History - <%= lang === 'hu' ? 'Nevelési anyag' : lang === 'ro' ? 'Material Educațional' : 'Educational Material' %></p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
